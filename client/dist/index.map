{"version":3,"sources":["js/admin-text-length.js","index.js"],"names":["countedFieldHolderClass","countedFieldClass","counterClass","counterFocusClass","counterMaxClass","counterAlmostMaxClass","lengthHintAttribute","AdminTextLength","input","messageElement","document","createElement","message","setAttribute","classList","add","insertAdjacentElement","parentNode","addEventListener","remove","updateCharacterCount","bind","maxLength","parseInt","getAttribute","length","value","initCounters","querySelectorAll","forEach","e","parentElement","querySelector"],"mappings":";;;AAsDA,IAAA,EAAA,WAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,OAAA,SAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,GAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAtDA,IAAMA,EAA0B,4BAC1BC,EAAoB,qBACpBC,EAAe,uBACfC,EAAoB,6BACpBC,EAAkB,2BAClBC,EAAwB,kCAGxBC,EAAsB,mBAEtBC,EAAAA,WACQC,SAAAA,EAAAA,GAAO,EAAA,KAAA,GACXC,IAAAA,EAAiBC,SAASC,cAAc,SACzCH,KAAAA,MAAQA,EACRI,KAAAA,QAAUH,EAEAI,EAAAA,aAAa,WAAY,QACzBC,EAAAA,UAAUC,IAAIb,EAAc,QAErCc,EAAAA,sBAAsB,WAAYP,GAClCQ,EAAAA,WAAWH,UAAUC,IAAIf,EAAyB,eAClDc,EAAAA,UAAUC,IAAId,GAEdiB,EAAAA,iBAAiB,QAAS,WAAMT,OAAAA,EAAeK,UAAUC,IAAIZ,KAC7De,EAAAA,iBAAiB,OAAQ,WAAMT,OAAAA,EAAeK,UAAUK,OAAOhB,KAC/De,EAAAA,iBAAiB,QAAS,KAAKE,qBAAqBC,KAAK,OA6BnE,OAAA,EAAA,IAAA,IAAA,uBA1ByB,MAAA,WACfC,IAAAA,EAAYC,SAAS,KAAKf,MAAMgB,aAAalB,IAC5CmB,EAAU,KAAKjB,MAAMkB,MAArBD,OAEFb,KAAAA,QAAQc,MAAWD,EAAUH,IAAAA,EAC7BV,KAAAA,QAAQE,UAAUK,OAAOf,EAAiBC,GAE3CoB,GAAUH,EACPV,KAAAA,QAAQE,UAAUC,IAAIX,GAClBqB,EAASH,GAAa,IAC1BV,KAAAA,QAAQE,UAAUC,IAAIV,OAgBjC,EA5CME,GAiCN,SAASoB,IACEC,SAAAA,iBAA0BtB,SAAAA,EAAwBuB,KAAAA,QAAQ,SAACC,GAC7DP,SAASO,EAAEN,aAAalB,KAAyE,OAAhDwB,EAAEC,cAAcC,cAAc9B,IAIpE,IAAIK,EAAgBuB,GAC5BV,yBAIZV,SAASQ,iBAAiB,mBAAoBS;;ACrD9C,aADA,QAAA,sBACA,QAAA","file":"index.map","sourceRoot":"../src","sourcesContent":["const countedFieldHolderClass = 'char-counted-field-holder';\nconst countedFieldClass = 'char-counted-field';\nconst counterClass = 'char-counted-counter';\nconst counterFocusClass = 'char-counted-counter-focus';\nconst counterMaxClass = 'char-counted-counter-max';\nconst counterAlmostMaxClass = 'char-counted-counter-almost-max';\n\n// This should be reflected in src/TextFieldExtension.php constant LENGTH_HINT_ATTRIBUTE\nconst lengthHintAttribute = 'data-hint-length';\n\nclass AdminTextLength {\n  constructor(input) {\n    const messageElement = document.createElement('input');\n    this.input = input;\n    this.message = messageElement;\n\n    messageElement.setAttribute('disabled', 'true');\n    messageElement.classList.add(counterClass, 'text');\n\n    input.insertAdjacentElement('afterEnd', messageElement);\n    input.parentNode.classList.add(countedFieldHolderClass, 'input-group');\n    input.classList.add(countedFieldClass);\n\n    input.addEventListener('focus', () => messageElement.classList.add(counterFocusClass));\n    input.addEventListener('blur', () => messageElement.classList.remove(counterFocusClass));\n    input.addEventListener('input', this.updateCharacterCount.bind(this));\n  }\n\n  updateCharacterCount() {\n    const maxLength = parseInt(this.input.getAttribute(lengthHintAttribute));\n    const {length} = this.input.value;\n\n    this.message.value = `${length}/${maxLength}`;\n    this.message.classList.remove(counterMaxClass, counterAlmostMaxClass);\n\n    if (length >= maxLength) {\n      this.message.classList.add(counterMaxClass);\n    } else if (length / maxLength >= 0.8) {\n      this.message.classList.add(counterAlmostMaxClass);\n    }\n  }\n}\n\nfunction initCounters() {\n  document.querySelectorAll(`input[${lengthHintAttribute}]`).forEach((e) => {\n    if (!parseInt(e.getAttribute(lengthHintAttribute)) || e.parentElement.querySelector(counterClass) !== null) {\n      return;\n    }\n\n    const counter = new AdminTextLength(e);\n    counter.updateCharacterCount();\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', initCounters);\n","import './sass/styles.scss';\nimport './js/admin-text-length.js';\n"]}